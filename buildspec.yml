version: 0.2

phases:
  install:
    runtime-versions:
      nodejs: 12
    commands:
  pre_build:
    commands:
      # 静的サイトのビルドやテストなど
      - npm install
      - npm run test
      - npm run build
  build:
    commands:
      # npm run build の結果がdistディレクトリに出力されるという前提
      - aws s3 sync dist s3://code-pipeline-tutorial-2021
# - aws cloudfront create-invalidation --distribution-id <キャッシュクリアするCloudFrontのDestributionID> --paths '/*'
